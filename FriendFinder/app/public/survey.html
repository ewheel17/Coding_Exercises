<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder</title>

    <!-- Bootstrap/JQuery -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- Chosen -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="pt-3">
            <h2>Answer the following questions to find your new best friend.</h2>
        </div>

        <hr>

        <div class="py-2">
            <u><h3>Your Info</h3></u>
            <div class="form-group row">
                <label for="example-text-input" class="col-2 col-form-label">Name</label>
                <div class="col-10">
                    <input class="form-control" type="text" id="user-name" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="example-search-input" class="col-2 col-form-label">Link to Photo</label>
                <div class="col-10">
                    <input class="form-control" type="text" id="user-photo" required>
                </div>
            </div>
        </div>

        <hr>

        <div class="py-2">
            <u><h3>Survey Questions</h3></u>
            <div class="py-3">
                <h4>Question 1</h4>
                <h5>Your mind is always buzzing with unexplored ideas and plans.</h5>
                <div class="radio">
                    <input type="radio" name="optradio1" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio1" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio1" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio1" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio1" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="py-3">
                <h4>Question 2</h4>
                <h5>Generally speaking, you rely more on your experience than your imagination.</h5>
                <div class="radio">
                    <input type="radio" name="optradio2" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio2" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio2" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio2" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio2" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="py-3">
                <h4>Question 3</h4>
                <h5>You find it easy to stay relaxed and focused even when there is some pressure.</h5>
                <div class="radio">
                    <input type="radio" name="optradio3" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio3" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio3" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio3" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio3" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="py-3">
                <h4>Question 4</h4>
                <h5>You rarely do something just out of sheer curiosity.</h5>
                <div class="radio">
                    <input type="radio" name="optradio4" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio4" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio4" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio4" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio4" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="py-3">
                <h4>Question 5</h4>
                <h5>People can rarely upset you.</h5>
                <div class="radio">
                    <input type="radio" name="optradio5" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio5" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio5" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio5" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio5" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="py-3">
                <h4>Question 6</h4>
                <h5>It is often difficult for you to relate to other people’s feelings.</h5>
                <div class="radio">
                    <input type="radio" name="optradio6" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio6" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio6" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio6" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio6" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="py-3">
                <h4>Question 7</h4>
                <h5>In a discussion, truth should be more important than people’s sensitivities.</h5>
                <div class="radio">
                    <input type="radio" name="optradio7" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio7" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio7" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio7" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio7" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="py-3">
                <h4>Question 8</h4>
                <h5>You rarely get carried away by fantasies and ideas.</h5>
                <div class="radio">
                    <input type="radio" name="optradio8" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio8" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio8" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio8" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio8" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="py-3">
                <h4>Question 9</h4>
                <h5>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h5>
                <div class="radio">
                    <input type="radio" name="optradio9" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio9" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio9" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio9" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio9" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="py-3">
                <h4>Question 10</h4>
                <h5>You feel more energetic after spending time with a group of people.</h5>
                <div class="radio">
                    <input type="radio" name="optradio10" value="1"> 1 (Strongly Disagree)</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio10" value="2"> 2</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio10" value="3"> 3</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio10" value="4"> 4</label>
                </div>
                <div class="radio">
                    <input type="radio" name="optradio10" value="5"> 5 (Strongly Agree)</label>
                </div>
            </div>
            <button class="btn btn-primary" type="submit" id="submitButton">Submit</button>
        </div>
    </div>

    <div class="modal" id="matchModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <h5 class="modal-title">Your closest Match is...</h5>
                <h5 id="user-match"></h5>
                <img id="user-match-photo" src="">
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        
        $('#submitButton').on('click', (event) => {
            event.preventDefault();

            var userInput = {
                name: $('#user-name').val().trim(),
                photo: $('#user-photo').val().trim(),
                scores: [
                    document.querySelector('input[name = "optradio1"]:checked').value,
                    document.querySelector('input[name = "optradio2"]:checked').value,
                    document.querySelector('input[name = "optradio3"]:checked').value,
                    document.querySelector('input[name = "optradio4"]:checked').value,
                    document.querySelector('input[name = "optradio5"]:checked').value,
                    document.querySelector('input[name = "optradio6"]:checked').value,
                    document.querySelector('input[name = "optradio7"]:checked').value,
                    document.querySelector('input[name = "optradio8"]:checked').value,
                    document.querySelector('input[name = "optradio9"]:checked').value,
                    document.querySelector('input[name = "optradio10"]:checked').value
                ]
            };
            console.log(userInput);

            $.post('/api/friends', userInput)
                .done((data) => {
                    console.log(data);
                    $('#user-match').html(data.matchName);
                    $("#user-match-photo").attr("src", data.matchImage);
                    $('#matchModal').modal('show');
                });
        });
    </script>
</body>
</html>